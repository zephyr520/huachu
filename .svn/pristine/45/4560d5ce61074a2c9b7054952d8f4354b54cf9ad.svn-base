/*
SQLyog Ultimate v12.09 (64 bit)
MySQL - 8.0.11 : Database - huachu
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`huachu` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `huachu`;

/*Table structure for table `t_admin_menu` */

DROP TABLE IF EXISTS `t_admin_menu`;

CREATE TABLE `t_admin_menu` (
  `menu_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '菜单ID',
  `menu_name` varchar(50) NOT NULL COMMENT '菜单名称',
  `menu_url` varchar(100) DEFAULT NULL COMMENT '菜单URL',
  `menu_icon` varchar(50) DEFAULT NULL COMMENT '菜单图标',
  `type` tinyint(4) NOT NULL DEFAULT '0' COMMENT '菜单类型：0-目录，1-菜单，2-按钮',
  `permit_identifier` varchar(100) DEFAULT NULL COMMENT '权限授权码',
  `parent_id` int(11) NOT NULL DEFAULT '0' COMMENT '父菜单ID',
  `order_num` smallint(6) NOT NULL DEFAULT '0' COMMENT '排序号',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  PRIMARY KEY (`menu_id`),
  KEY `permit_identifier` (`permit_identifier`),
  KEY `menu_name` (`menu_name`),
  KEY `create_time` (`create_time`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8 COMMENT='系统菜单表';

/*Data for the table `t_admin_menu` */

insert  into `t_admin_menu`(`menu_id`,`menu_name`,`menu_url`,`menu_icon`,`type`,`permit_identifier`,`parent_id`,`order_num`,`create_time`) values (1,'系统管理','#','el-icon-menu',0,'admin:system:manage',0,0,'2018-12-29 09:34:53'),(2,'用户管理','/app/user','el-icon-tickets',1,'admin:user:list',1,1,'2018-12-29 09:35:50'),(3,'新增用户','#',NULL,2,'admin:user:create',2,1,'2018-12-29 09:36:22'),(4,'修改用户','#',NULL,2,'admin:user:modify',2,2,'2018-12-29 09:36:44'),(5,'删除用户','#',NULL,2,'admin:user:delete',2,3,'2018-12-29 09:37:20'),(6,'角色管理','/app/role','el-icon-tickets',1,'admin:role:list',1,2,'2018-12-29 09:37:43'),(7,'查询用户','#',NULL,2,'admin:user:query',2,0,'2018-12-29 09:59:57'),(8,'查询角色','#',NULL,2,'admin:role:query',6,1,'2018-12-29 10:01:40'),(9,'授权','#',NULL,2,'admin:role:auth',6,2,'2018-12-29 16:47:37');

/*Table structure for table `t_admin_role` */

DROP TABLE IF EXISTS `t_admin_role`;

CREATE TABLE `t_admin_role` (
  `role_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '角色ID',
  `role_no` varchar(50) NOT NULL COMMENT '角色代码',
  `role_name` varchar(50) NOT NULL COMMENT '角色名称',
  `role_desc` varchar(100) DEFAULT NULL COMMENT '角色描述',
  `create_time` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `if_operate` bit(1) DEFAULT b'1' COMMENT '是否允许删除：0-不允许，1-允许',
  PRIMARY KEY (`role_id`),
  UNIQUE KEY `role_no` (`role_no`),
  KEY `role_name` (`role_name`)
) ENGINE=InnoDB AUTO_INCREMENT=100 DEFAULT CHARSET=utf8 COMMENT='角色表';

/*Data for the table `t_admin_role` */

insert  into `t_admin_role`(`role_id`,`role_no`,`role_name`,`role_desc`,`create_time`,`if_operate`) values (1,'admin','超级管理员','拥有所有的权限','2018-12-22 14:51:47','\0'),(2,'createor','制单员','负责单据录入','2018-12-22 14:51:47',''),(3,'recycling','回收员','负责回收配件','2018-12-22 14:51:47',''),(4,'stockman','仓库管理员','负责对已回收的回收单或配件进行入库操作','2018-12-22 14:51:47',''),(5,'saleman','销售员','负责销售已回收的配件','2018-12-22 14:51:47','');

/*Table structure for table `t_admin_role_menu` */

DROP TABLE IF EXISTS `t_admin_role_menu`;

CREATE TABLE `t_admin_role_menu` (
  `role_id` int(11) NOT NULL,
  `menu_id` int(11) NOT NULL,
  PRIMARY KEY (`role_id`,`menu_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='角色菜单表';

/*Data for the table `t_admin_role_menu` */

insert  into `t_admin_role_menu`(`role_id`,`menu_id`) values (1,1),(1,2),(1,3),(1,4),(1,5),(1,6),(3,1),(3,2),(3,6),(3,7),(3,8);

/*Table structure for table `t_admin_user` */

DROP TABLE IF EXISTS `t_admin_user`;

CREATE TABLE `t_admin_user` (
  `user_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '用户编号',
  `user_name` varchar(50) NOT NULL COMMENT '用户名',
  `pass_word` varchar(50) NOT NULL COMMENT '密码',
  `real_name` varchar(50) DEFAULT NULL COMMENT '真实姓名',
  `gender` tinyint(4) NOT NULL DEFAULT '0' COMMENT '性别：1-男，2-女',
  `phone` varchar(11) DEFAULT NULL COMMENT '手机号',
  `status` varchar(15) NOT NULL DEFAULT 'enable' COMMENT '状态：enable-正常，disable-禁用',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `last_login_time` datetime DEFAULT NULL COMMENT '最后一次登录时间',
  `if_operate` bit(1) NOT NULL DEFAULT b'1' COMMENT '是否可删除：1-可删除，0-不可删除',
  PRIMARY KEY (`user_id`) USING BTREE,
  UNIQUE KEY `user_name` (`user_name`) USING BTREE,
  KEY `create_time` (`create_time`) USING BTREE,
  KEY `phone` (`phone`)
) ENGINE=InnoDB AUTO_INCREMENT=1006 DEFAULT CHARSET=utf8 COMMENT='用户表';

/*Data for the table `t_admin_user` */

insert  into `t_admin_user`(`user_id`,`user_name`,`pass_word`,`real_name`,`gender`,`phone`,`status`,`create_time`,`last_login_time`,`if_operate`) values (1000,'admin','admin','张恩平',1,'18576793891','enable','2018-12-26 17:03:26','2018-12-29 16:54:20','\0'),(1005,'zhangsan','123456','张三',1,'15815559597','enable','2018-12-27 18:17:45','2018-12-29 16:48:55','');

/*Table structure for table `t_admin_user_role` */

DROP TABLE IF EXISTS `t_admin_user_role`;

CREATE TABLE `t_admin_user_role` (
  `user_id` int(11) NOT NULL COMMENT '用户ID',
  `role_id` int(11) NOT NULL COMMENT '角色ID',
  PRIMARY KEY (`user_id`,`role_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='用户角色关联表';

/*Data for the table `t_admin_user_role` */

insert  into `t_admin_user_role`(`user_id`,`role_id`) values (1000,1),(1005,3);

/*Table structure for table `t_recycling_accessory` */

DROP TABLE IF EXISTS `t_recycling_accessory`;

CREATE TABLE `t_recycling_accessory` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `recycling_no` int(11) NOT NULL COMMENT '回收单号（关联t_recycling_lst表中的recycling_no）',
  `accessory_name` varchar(100) DEFAULT NULL COMMENT '汽车配件名称',
  `accessory_price` decimal(10,2) DEFAULT '0.00' COMMENT '汽车配件价格',
  `accessory_num` int(11) DEFAULT '0' COMMENT '配件数量',
  `accessory_status` smallint(6) NOT NULL DEFAULT '0' COMMENT '配件回收状态：0-未回收，1-已回收，3-已入库',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `accessory_recycling_time` datetime DEFAULT NULL COMMENT '配件回收时间',
  `accessory_recycling_user_id` int(11) NOT NULL DEFAULT '0' COMMENT '配件回收员ID',
  `barcode` varchar(255) DEFAULT NULL COMMENT '条形码',
  `remark` varchar(1000) DEFAULT NULL COMMENT '备注',
  `accessory_storage_time` datetime DEFAULT NULL COMMENT '配件入库时间',
  `accessory_storage_user_id` int(11) DEFAULT '0' COMMENT '配件入库员ID',
  `if_important` bit(1) DEFAULT b'0' COMMENT '是否是重要配件：0-否，1-是',
  `if_recycling_failed` bit(1) DEFAULT b'0' COMMENT '配件是否回收失败：0-否，1-是',
  `if_take_photo` bit(1) DEFAULT b'0' COMMENT '配件是否要拍照：0-否，1-是',
  PRIMARY KEY (`id`),
  UNIQUE KEY `barcode` (`barcode`),
  KEY `recycling_no` (`recycling_no`),
  KEY `accessory_name` (`accessory_name`),
  KEY `accessory_status` (`accessory_status`),
  KEY `create_time` (`create_time`),
  KEY `accessory_recycling_user_id` (`accessory_recycling_user_id`),
  KEY `accessory_storage_user_id` (`accessory_storage_user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='配件表';

/*Data for the table `t_recycling_accessory` */

/*Table structure for table `t_recycling_accessory_file` */

DROP TABLE IF EXISTS `t_recycling_accessory_file`;

CREATE TABLE `t_recycling_accessory_file` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '附件ID',
  `accessory_id` bigint(20) NOT NULL DEFAULT '0' COMMENT '配件ID',
  `file_name` varchar(50) NOT NULL COMMENT '附件图片名称',
  `file_url` varchar(255) NOT NULL COMMENT '附件图片URL',
  PRIMARY KEY (`id`),
  KEY `accessory_id` (`accessory_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='配件图片表';

/*Data for the table `t_recycling_accessory_file` */

/*Table structure for table `t_recycling_dispatch` */

DROP TABLE IF EXISTS `t_recycling_dispatch`;

CREATE TABLE `t_recycling_dispatch` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `recycling_id` varchar(50) DEFAULT '0' COMMENT '回收单号(关联t_recycling_list表中的id)',
  `expire_date` date DEFAULT NULL COMMENT '回收单回收截止日期',
  `recycling_user_id` int(11) NOT NULL DEFAULT '0' COMMENT '回收单回收用户ID',
  `dispatch_time` timestamp NULL DEFAULT NULL COMMENT '回收单派单时间',
  `dispatch_user_id` int(11) NOT NULL DEFAULT '0' COMMENT '回收单派单作员ID',
  PRIMARY KEY (`id`),
  KEY `dispatch_time` (`dispatch_time`),
  KEY `expire_date` (`expire_date`),
  KEY `recycling_user_id` (`recycling_user_id`),
  KEY `recycling_id` (`recycling_id`),
  KEY `dispatch_user_id` (`dispatch_user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='回收单派单记录表';

/*Data for the table `t_recycling_dispatch` */

/*Table structure for table `t_recycling_list` */

DROP TABLE IF EXISTS `t_recycling_list`;

CREATE TABLE `t_recycling_list` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `recycling_no` varchar(20) NOT NULL COMMENT '回收单号',
  `file_no` varchar(50) NOT NULL COMMENT '档案号',
  `plate_no` varchar(50) NOT NULL COMMENT '车牌号',
  `car_model` varchar(100) DEFAULT NULL COMMENT '车款',
  `repair_shop_id` int(11) DEFAULT '0' COMMENT '修理厂ID(关联t_repair_shop表中的ID)',
  `staff_id` int(11) DEFAULT '0' COMMENT '定损员ID(关联t_staff表中的ID)',
  `organization` varchar(50) DEFAULT NULL COMMENT '三级机构',
  `recycling_status` smallint(6) NOT NULL DEFAULT '0' COMMENT '回收单状态：0-未回收，1-已回收，2-部分回收',
  `recycling_time` datetime DEFAULT NULL COMMENT '回收单全部回收完成时间',
  `storage_status` smallint(6) DEFAULT '0' COMMENT '回收单入库状态：0-未入库，1-已入库，2-部分入库',
  `storage_time` datetime DEFAULT NULL COMMENT '回收单全部入库时间',
  `create_id` int(11) DEFAULT '0' COMMENT '回收单创建人ID',
  `create_time` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT '回收单创建时间',
  `dispatch_id` int(11) NOT NULL DEFAULT '0' COMMENT '回收单派单记录ID(关联t_recycling_dispatch表中的id)',
  `version` int(11) NOT NULL DEFAULT '0' COMMENT '版本号',
  PRIMARY KEY (`id`),
  UNIQUE KEY `recycling_no` (`recycling_no`),
  UNIQUE KEY `file_no_plate_no` (`file_no`,`plate_no`),
  KEY `repair_shop_id` (`repair_shop_id`),
  KEY `staff_name` (`staff_id`),
  KEY `organization` (`organization`),
  KEY `create_id` (`create_id`),
  KEY `create_time` (`create_time`),
  KEY `recycling_status` (`recycling_status`),
  KEY `storage_status` (`storage_status`),
  KEY `dispatch_user_id` (`dispatch_id`),
  KEY `version` (`version`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='回收单表';

/*Data for the table `t_recycling_list` */

/*Table structure for table `t_repair_shop` */

DROP TABLE IF EXISTS `t_repair_shop`;

CREATE TABLE `t_repair_shop` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `repair_shop_name` varchar(100) NOT NULL COMMENT '修理厂名称',
  `repair_shop_addr` varchar(200) NOT NULL COMMENT '修理厂地址',
  `line` varchar(50) NOT NULL COMMENT '修理厂线路',
  `house_type` tinyint(4) NOT NULL DEFAULT '0' COMMENT '门牌类型：0-未知，1-单号门牌，2-双号门牌',
  `longitude` double NOT NULL DEFAULT '0' COMMENT '经度',
  `latitude` double NOT NULL DEFAULT '0' COMMENT '纬度',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `sort_num` int(11) NOT NULL DEFAULT '0' COMMENT '排序号',
  PRIMARY KEY (`id`),
  UNIQUE KEY `repair_shop_name` (`repair_shop_name`),
  KEY `line` (`line`) USING BTREE,
  KEY `repair_shop_addr` (`repair_shop_addr`),
  KEY `create_time` (`create_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='修理厂信息表';

/*Data for the table `t_repair_shop` */

/*Table structure for table `t_staff` */

DROP TABLE IF EXISTS `t_staff`;

CREATE TABLE `t_staff` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `staff_phone` varchar(11) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '定损员手机号',
  `staff_name` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '定损员姓名',
  `remark` varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL COMMENT '备注信息',
  PRIMARY KEY (`id`),
  UNIQUE KEY `staffPhone_staffName` (`staff_phone`,`staff_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='定损员信息表';

/*Data for the table `t_staff` */

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
